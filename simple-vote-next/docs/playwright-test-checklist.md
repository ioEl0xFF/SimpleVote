# SimpleVote Playwright テストチェックリスト

## 📋 概要

このチェックリストは、SimpleVote アプリケーションの E2E テストを Playwright で実装する際の包括的なガイドです。

## 🎯 テスト対象機能

### 1. ウォレット接続機能

**テストファイル**: `tests/e2e/wallet-connection.spec.ts` ✅ 実装済み

-   [ ] **ウォレット接続ボタンの表示**

    -   [x] 接続前の状態でボタンが表示される
    -   [x] ボタンのテキストが正しく表示される
    -   [x] ボタンがクリック可能である

-   [ ] **ウォレット接続プロセス**

    -   [x] 接続ボタンクリックでウォレット選択ダイアログが表示される
    -   [ ] MetaMask などのウォレットが検出される
    -   [ ] 接続成功時にウォレットアドレスが表示される
    -   [ ] 接続失敗時のエラーハンドリング

-   [ ] **ウォレット切断機能**
    -   [ ] 切断ボタンが表示される
    -   [ ] 切断後に接続状態がリセットされる

### 2. ホームページ（投票一覧）

**テストファイル**: `tests/e2e/home-page.spec.ts` ⏳ 未実装

-   [ ] **ページ表示**

    -   [ ] ページタイトルが正しく表示される
    -   [ ] 新規作成ボタンが表示される
    -   [ ] 投票一覧セクションが表示される

-   [ ] **投票一覧の表示**

    -   [ ] 投票が存在する場合、リストが表示される
    -   [ ] 投票が存在しない場合、適切なメッセージが表示される
    -   [ ] 各投票の情報（タイプ、タイトル、ID）が正しく表示される
    -   [ ] ローディング状態が適切に表示される

-   [ ] **投票選択機能**
    -   [ ] 投票をクリックすると適切なページに遷移する
    -   [ ] 各投票タイプ（simple, weighted, dynamic）で正しい URL に遷移する

### 3. 投票作成ページ

**テストファイル**: `tests/e2e/create-poll.spec.ts` ⏳ 未実装

-   [ ] **ページ表示**

    -   [ ] 作成フォームが表示される
    -   [ ] 必須フィールドが適切にマークされる

-   [ ] **フォーム入力**

    -   [ ] 投票タイトルの入力
    -   [ ] 投票期間の設定
    -   [ ] 選択肢の追加・削除
    -   [ ] 投票タイプの選択（simple, weighted, dynamic）

-   [ ] **バリデーション**

    -   [ ] 空のタイトルでのエラー表示
    -   [ ] 無効な期間設定でのエラー表示
    -   [ ] 選択肢が不足している場合のエラー表示
    -   [ ] 最大選択肢数の制限

-   [ ] **投票作成プロセス**
    -   [ ] 作成ボタンクリックでトランザクションが開始される
    -   [ ] トランザクション確認ダイアログの表示
    -   [ ] 作成成功時の成功メッセージ
    -   [ ] 作成失敗時のエラーメッセージ

### 4. シンプル投票ページ

**テストファイル**: `tests/e2e/simple-vote.spec.ts` ⏳ 未実装

-   [ ] **ページ表示**

    -   [ ] 投票の詳細情報が表示される
    -   [ ] 選択肢が正しく表示される
    -   [ ] 現在の投票結果が表示される
    -   [ ] 投票期間の表示

-   [ ] **投票機能**

    -   [ ] 選択肢をクリックして投票できる
    -   [ ] 投票確認ダイアログの表示
    -   [ ] 投票成功時の結果更新
    -   [ ] 既に投票済みの場合の制限

-   [ ] **投票期間の制限**
    -   [ ] 期間外の投票が制限される
    -   [ ] 終了した投票の表示

### 5. 重み付き投票ページ

**テストファイル**: `tests/e2e/weighted-vote.spec.ts` ⏳ 未実装

-   [ ] **ページ表示**

    -   [ ] 重み付き投票の専用 UI が表示される
    -   [ ] 各選択肢に重みを設定できる UI
    -   [ ] 現在の重み付き結果が表示される

-   [ ] **重み設定機能**

    -   [ ] 各選択肢に重みを設定できる
    -   [ ] 重みの合計が正しく計算される
    -   [ ] 重みのバリデーション

-   [ ] **投票実行**
    -   [ ] 重み付き投票の実行
    -   [ ] 結果の正しい計算と表示

### 6. 動的投票ページ

**テストファイル**: `tests/e2e/dynamic-vote.spec.ts` ⏳ 未実装

-   [ ] **ページ表示**

    -   [ ] 動的投票の専用 UI が表示される
    -   [ ] リアルタイム結果の表示
    -   [ ] 動的更新の動作確認

-   [ ] **動的機能**
    -   [ ] リアルタイムでの結果更新
    -   [ ] 新しい投票の即座反映
    -   [ ] 動的選択肢の追加・削除

## 🔧 技術的テスト項目

### 1. レスポンシブデザイン

-   [x] **デスクトップ表示**

    -   [ ] 1920x1080 での表示確認
    -   [ ] 1366x768 での表示確認

-   [x] **タブレット表示**

    -   [ ] 768x1024 での表示確認
    -   [ ] タッチ操作の動作確認

-   [x] **モバイル表示**
    -   [ ] 375x667 での表示確認
    -   [ ] 320x568 での表示確認
    -   [ ] モバイルでのタッチ操作

### 2. パフォーマンス

-   [x] **ページ読み込み速度**

    -   [ ] 初回読み込み時間の測定
    -   [ ] ページ遷移の速度確認

-   [ ] **メモリ使用量**
    -   [ ] 長時間使用時のメモリリーク確認
    -   [ ] 大量データ表示時の動作確認

### 3. アクセシビリティ

-   [ ] **キーボードナビゲーション**

    -   [ ] Tab キーでのフォーカス移動
    -   [ ] Enter/Space キーでの操作
    -   [ ] Escape キーでのダイアログ閉じる

-   [ ] **スクリーンリーダー対応**
    -   [ ] aria-label の適切な設定
    -   [ ] セマンティックな HTML 構造

### 4. ブラウザ互換性

-   [ ] **Chrome/Chromium**

    -   [ ] 最新版での動作確認
    -   [ ] 前バージョンでの動作確認

-   [ ] **Firefox**

    -   [ ] 最新版での動作確認
    -   [ ] 前バージョンでの動作確認

-   [ ] **Safari**

    -   [ ] 最新版での動作確認
    -   [ ] 前バージョンでの動作確認

-   [ ] **Edge**
    -   [ ] 最新版での動作確認

## 🧪 テスト実装ガイド

### 1. テストファイル構造

#### 現在実装済みのテストファイル

```
tests/
├── e2e/
│   ├── wallet-connection.spec.ts ✅ 実装済み
│   │   ├── ウォレット接続ボタンの表示
│   │   ├── ウォレット接続プロセス（成功・失敗）
│   │   ├── ウォレット切断機能
│   │   ├── エラーハンドリング
│   │   ├── アクセシビリティ
│   │   └── レスポンシブデザイン
│   ├── home-page.spec.ts ⏳ 未実装
│   ├── create-poll.spec.ts ⏳ 未実装
│   ├── simple-vote.spec.ts ⏳ 未実装
│   ├── weighted-vote.spec.ts ⏳ 未実装
│   └── dynamic-vote.spec.ts ⏳ 未実装
├── helpers/
│   ├── wallet-test-utils.ts ✅ 実装済み
│   │   ├── ウォレット接続・切断ヘルパー
│   │   ├── モック関数群
│   │   ├── スタイル確認ヘルパー
│   │   ├── レスポンシブテストヘルパー
│   │   └── キーボードナビゲーションヘルパー
│   ├── test-utils.ts ⏳ 未実装
│   ├── mock-data.ts ⏳ 未実装
│   └── selectors.ts ⏳ 未実装
└── fixtures/
    ├── test-wallet.json ⏳ 未実装
    └── test-polls.json ⏳ 未実装
```

#### 実装予定のテストファイル詳細

**e2e/ ディレクトリ**

-   `home-page.spec.ts` - ホームページ（投票一覧）のテスト
-   `create-poll.spec.ts` - 投票作成ページのテスト
-   `simple-vote.spec.ts` - シンプル投票ページのテスト
-   `weighted-vote.spec.ts` - 重み付き投票ページのテスト
-   `dynamic-vote.spec.ts` - 動的投票ページのテスト

**helpers/ ディレクトリ**

-   `test-utils.ts` - 共通テストユーティリティ関数
-   `mock-data.ts` - テスト用モックデータ
-   `selectors.ts` - テストセレクターの定義

**fixtures/ ディレクトリ**

-   `test-wallet.json` - テスト用ウォレット設定
-   `test-polls.json` - テスト用投票データ

### 2. テストデータ管理

**ファイル**: `tests/helpers/mock-data.ts` ⏳ 未実装

-   [ ] **モックデータの準備**

    -   [ ] テスト用投票データ
    -   [ ] テスト用ウォレットデータ
    -   [ ] エラーケース用データ

-   [ ] **テスト環境の設定**
    -   [ ] ローカルブロックチェーンネットワーク
    -   [ ] テスト用スマートコントラクト
    -   [ ] テスト用ウォレット

### 3. セレクター管理

**ファイル**: `tests/helpers/selectors.ts` ⏳ 未実装

-   [ ] **data-testid 属性の追加**
    -   [ ] 重要な UI 要素への属性追加
    -   [ ] 一意性の確保
    -   [ ] 説明的な名前の使用

### 4. テストヘルパー関数

**ファイル**: `tests/helpers/test-utils.ts` ⏳ 未実装

-   [ ] **共通操作の関数化**
    -   [ ] ウォレット接続ヘルパー
    -   [ ] 投票作成ヘルパー
    -   [ ] 投票実行ヘルパー
    -   [ ] ページ遷移ヘルパー
    -   [ ] データ検証ヘルパー

## 🚨 エラーハンドリングテスト

### 1. ネットワークエラー

-   [ ] **接続エラー**
    -   [ ] ウォレット接続失敗
    -   [ ] ブロックチェーン接続失敗
    -   [ ] API 接続失敗

### 2. トランザクションエラー

-   [ ] **ガス不足エラー**
-   [ ] **トランザクション拒否エラー**
-   [ ] **コントラクトエラー**

### 3. ユーザー入力エラー

-   [ ] **無効な入力値**
-   [ ] **必須フィールドの未入力**
-   [ ] **文字数制限の超過**

## 📊 テスト実行とレポート

### 1. テスト実行

```bash
# 全テスト実行
npm run test:e2e

# 特定のテスト実行
npm run test:e2e -- --grep "ウォレット接続"

# ヘッドレスモード
npm run test:e2e -- --headless

# デバッグモード
npm run test:e2e -- --debug
```

### 2. レポート生成

-   [ ] **HTML レポート**
-   [ ] **JUnit XML レポート**
-   [ ] **カスタムレポート**

### 3. CI/CD 統合

-   [ ] **GitHub Actions 設定**
-   [ ] **自動テスト実行**
-   [ ] **テスト結果の通知**

## 🔄 継続的改善

### 1. テストメンテナンス

-   [ ] **定期的なテスト見直し**
-   [ ] **不要なテストの削除**
-   [ ] **新機能へのテスト追加**

### 2. パフォーマンス改善

-   [ ] **テスト実行時間の最適化**
-   [ ] **並列実行の検討**
-   [ ] **テストデータの最適化**

### 3. 品質向上

-   [ ] **テストカバレッジの向上**
-   [ ] **エッジケースの追加**
-   [ ] **ユーザビリティテストの追加**

## 📝 チェックリスト使用方法

1. **新機能開発時**: 該当する項目にチェックを入れてテストを実装
2. **バグ修正時**: 関連するテスト項目を確認・更新
3. **リリース前**: 全項目をチェックしてテスト完了を確認
4. **定期的な見直し**: 月次でチェックリストの更新・改善

---

**最終更新**: 2024 年 12 月
**作成者**: SimpleVote 開発チーム
**バージョン**: 1.0.0
